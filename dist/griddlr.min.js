!function(t,e,n){var r,s,i;return i="Griddlr",s={debug:!1,property:"value",columns:12,classes:{row:"row",column:"col-xs-*"}},r=function(){function e(e,n){this.element=e,this.$element=t(this.element),this.settings=t.extend({},s,n),this._gutter=15,this._width=0,this._defaults=s,this._columns=null,this._name=i,this.init()}return e.prototype.log=function(t){return this.settings.debug?console.log("% Griddlr: "+t):void 0},e.prototype.trigger=function(t,e){return e=!!e||"",t="griddlr."+t,this.$element.trigger(t,[this,e])},e.prototype.set=function(t,e){return this.settings[t]=e},e.prototype.init=function(){var e;return e=this,t(n).ready(function(){return e.trigger("init.before"),e.log("Initializing..."),e.createWrapper(),e.setupRows(),e.setupColumns(),e.bindResize(),e.trigger("init.after")})},e.prototype.createWrapper=function(){return this.log("Creating wrapper element..."),this.$element.wrapInner('<div class="griddlr-wrapper"></div>'),this.wrapper=this.$element.find(".griddlr-wrapper"),this.settings.debug&&this.wrapper.addClass("griddlr-debug"),this.wrapper.wrapInner('<div class="griddlr-content"></div>'),this.content=this.wrapper.find(".griddlr-content"),this.createDataElement()},e.prototype.createDataElement=function(){return this.log("Creating data element..."),this.dataElement=t('<div class="griddlr-data"></div>').appendTo(this.wrapper),this.dataRow=t("<div></div>").addClass(this.settings.classes.row),this.dataColumn=t("<div></div>").addClass(this.columnClass(this.settings.columns)),this.dataColumn.appendTo(this.dataRow),this.dataRow.appendTo(this.dataElement),this.collectData()},e.prototype.addRow=function(t){return t.addClass("griddlr-row"),t.append('<div class="griddlr-button griddlr-button-add">+</div>'),t.append('<div class="griddlr-button griddlr-button-remove">&times;</div>'),t.wrapInner('<div class="griddlr-row-inner"></div>')},e.prototype.setupRows=function(){var e;return e=this,this.content.find("."+this.settings.classes.row).each(function(){return e.addRow(t(this))})},e.prototype.getColumns=function(t){var e,n;return e=t.className.replace("griddlr-column","").trim(),n=this.settings.classes.column.replace("*",""),parseInt(e.replace(n,""))},e.prototype.changeClass=function(e,n){var r,s,i;return i=this.getColumns(e),i!==n?(r=e.className.replace("griddlr-column","").trim(),t(e).removeClass(r),s=this.settings.classes.column.replace("*",n),r=r.replace(r,s),t(e).addClass(r)):void 0},e.prototype.drag=function(e){var r,s,i,o,a,d,l;return a=this,l=this._width,r=0,i=0,o=0,d=e,s=this.getColumns(e),t(n).on("mousedown",function(n){return n.target===e?(d=n.target,r=1,o=n.offsetX,t("html").css("cursor","ew-resize")):void 0}),t(n).on("mousemove",function(t){var n,s,i;return r?(s=t.offsetX,i=s/l*100,n=a.findColumnByPercentage(i),a.changeClass(e,n)):void 0}),t(n).on("mouseup",function(n){return r=0,i=0,t("html").css("cursor",""),a.bindColumn(t(e))})},e.prototype.addColumn=function(t){return t.addClass("griddlr-column"),t.append('<div class="griddlr-button griddlr-button-remove">&times;</div>'),t.wrapInner('<div class="griddlr-column-inner"></div>')},e.prototype.bindColumn=function(e){var n;return n=e.innerWidth()-2*this._gutter,this.drag(e.get(0)),e.on("mousemove",function(e){return e.offsetX>=n?t("html").css("cursor","ew-resize"):t("html").css("cursor","")}),e.on("mouseleave",function(t){})},e.prototype.setupColumns=function(){var e;return e=this,this.content.find('[class^="'+this.columnClass('"]')).each(function(){return e.addColumn(t(this)),e.bindColumn(t(this))})},e.prototype.bindResize=function(){},e.prototype.findColumnByPercentage=function(t){var e,n,r,s;for(s=this._columns,n=0,r=s.length;r>n;n+=1)if(e=s[n],e.range[0]<=t&&t<=e.range[1])return e.columns;return 12},e.prototype.collectData=function(){var t,e,n,r,s,i;for(this.log("Collecting data..."),this._gutter=parseInt(this.dataColumn.css("padding-left")),this._width=this.wrapper.outerWidth(),t=this.settings.columns,s=100/t,t=[],n=0,n=r=1;13>r;n=r+=1)i=n*parseInt(s)-5,e=n*parseInt(s)+5,t.push({range:[i,e],columns:n});return this._columns=t},e.prototype.columnClass=function(t){return this.settings.classes.column.replace("*",t)},e}(),t.fn[i]=function(e){return this.each(function(){return t.data(this,""+i)?void 0:t.data(this,""+i,new r(this,e))})}}(jQuery,window,document);